---
phase: 15-dashboard-inventory
plan: 06
type: execute
wave: 4
depends_on: ["15-04"]
files_modified:
  - src/app/(protected)/medias/page.tsx
autonomous: true

must_haves:
  truths:
    - "Dashboard is server component at /medias"
    - "Efectivo en caja is the most prominent metric"
    - "Navigation cards link to all 5 medias sections"
  artifacts:
    - path: "src/app/(protected)/medias/page.tsx"
      provides: "Medias dashboard home page"
      min_lines: 30
  key_links:
    - from: "src/app/(protected)/medias/page.tsx"
      to: "getDashboardMetrics"
      via: "server-side data fetch"
      pattern: "getDashboardMetrics"
    - from: "src/app/(protected)/medias/page.tsx"
      to: "getStockAlertsSummary"
      via: "server-side data fetch"
      pattern: "getStockAlertsSummary"
---

<objective>
Create the medias dashboard page at /medias as the module home with metrics, navigation, and stock alerts.

Purpose: Provide operational overview and quick navigation for medias module.
Output: Dashboard page replacing current productos landing.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/15-dashboard-inventory/15-CONTEXT.md
@.planning/phases/15-dashboard-inventory/15-RESEARCH.md
@src/app/(protected)/medias/productos/page.tsx
@src/components/medias/dashboard/dashboard-grid.tsx
@src/components/medias/dashboard/nav-card.tsx
@src/components/medias/dashboard/stock-alerts-card.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create medias dashboard page</name>
  <files>src/app/(protected)/medias/page.tsx</files>
  <action>
Create src/app/(protected)/medias/page.tsx as SERVER component:

1. Import getDashboardMetrics, getStockAlertsSummary from dashboard queries
2. Import DashboardGrid, NavigationCards, StockAlertsCard components

3. async function MediasDashboardPage:
   - Fetch data in parallel: const [metrics, stockAlerts] = await Promise.all([getDashboardMetrics(), getStockAlertsSummary()])

4. Page layout:
   - Container with py-6
   - Header: "Medias de Compresion" h1 with "Dashboard operativo" subtitle
   - Separator
   - DashboardGrid with metrics (efectivo emphasized as most visible)
   - Separator
   - NavigationCards (5 section links)
   - Separator
   - StockAlertsCard with stockAlerts data

5. Add metadata export:
   - title: 'Medias | Dashboard'

Per CONTEXT.md: Dashboard is at /medias (replaces old landing), productos moved to /medias/productos.
Note: productos page already exists at /medias/productos, so no move needed.
The old /medias route was implicitly the productos page - now it becomes the dashboard.
  </action>
  <verify>Run `cat src/app/(protected)/medias/page.tsx` and verify server component with parallel data fetching</verify>
  <done>Dashboard page fetches metrics/alerts and renders DashboardGrid, NavigationCards, StockAlertsCard</done>
</task>

</tasks>

<verification>
- [ ] src/app/(protected)/medias/page.tsx exists as server component
- [ ] Page fetches getDashboardMetrics and getStockAlertsSummary in parallel
- [ ] DashboardGrid shows efectivo prominently
- [ ] NavigationCards provides 5 section links
- [ ] StockAlertsCard shows critical stock products
- [ ] Layout follows existing page patterns
</verification>

<success_criteria>
Medias dashboard page is the new home for the module with metrics, navigation, and alerts.
</success_criteria>

<output>
After completion, create `.planning/phases/15-dashboard-inventory/15-06-SUMMARY.md`
</output>
